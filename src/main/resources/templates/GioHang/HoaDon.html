<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="layout :: head-link"></head>

<body data-topbar="dark" data-layout="horizontal">
<!-- Begin page -->
<div id="layout-wrapper">
    <header th:replace="layout :: header-page"></header>
    <div th:replace="layout :: topnav"></div>
    <link rel="stylesheet" th:href="@{https://cdn.jsdelivr.net/npm/jquery.steps@1.1.2/dist/jquery-steps.min.css}">

    <!--Nội dung-->
    <div class="main-content">
        <div class="page-content">
            <div class="container-fluid">
                <div class="checkout-tabs" data-select2-id="14">
                    <div class="row">
                        <div class="col-xl-2 col-sm-3">
                            <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist"
                                 aria-orientation="vertical">
                                <a class="nav-link active" id="v-pills-shipping-tab" data-bs-toggle="pill"
                                   href="#v-pills-shipping" role="tab" aria-controls="v-pills-shipping"
                                   aria-selected="true">
                                    <i class="bx bxs-truck d-block check-nav-icon mt-4 mb-2"></i>
                                    <p class="fw-bold mb-4">Thông tin đặt hàng</p>
                                </a>
                                <a class="nav-link" id="v-pills-payment-tab" data-bs-toggle="pill"
                                   href="#v-pills-payment" role="tab" aria-controls="v-pills-payment"
                                   aria-selected="false" tabindex="-1">
                                    <i class="bx bx-money d-block check-nav-icon mt-4 mb-2"></i>
                                    <p class="fw-bold mb-4">Phương thức</p>
                                </a>
                                <a class="nav-link" id="v-pills-confir-tab" data-bs-toggle="pill" href="#v-pills-confir"
                                   role="tab" aria-controls="v-pills-confir" aria-selected="false" tabindex="-1">
                                    <i class="bx bx-badge-check d-block check-nav-icon mt-4 mb-2"></i>
                                    <p class="fw-bold mb-4">Đơn hàng</p>
                                </a>
                            </div>
                        </div>


                        <div class="col-xl-10 col-sm-9" data-select2-id="13">
                            <form th:action="@{/gio-hang/luu-don-hang}" method="post" th:object="${hoadon}">

                                <div class="card" data-select2-id="12">
                                    <div class="card-body" data-select2-id="11">
                                        <div class="tab-content" id="v-pills-tabContent"
                                             data-select2-id="v-pills-tabContent">
                                            <div class="tab-pane fade show active" id="v-pills-shipping" role="tabpanel"
                                                 aria-labelledby="v-pills-shipping-tab"
                                                 data-select2-id="v-pills-shipping">
                                                <div data-select2-id="10">
                                                    <h4 class="card-title">Thông tin đặt hàng</h4>
                                                    <p class="card-title-desc">Thông tin khi nhận hàng</p>
                                                    <div data-select2-id="9">
                                                        <div class="form-group row mb-4">
                                                            <label class="col-md-2 col-form-label">Họ
                                                                tên</label>
                                                            <div class="col-md-10">
                                                                <a class="form-control"
                                                                   th:text="${taikhoan.fullname}"></a>
                                                            </div>
                                                        </div>

                                                        <div class="form-group row mb-4">
                                                            <label class="col-md-2 col-form-label">Số
                                                                điện thoại</label>
                                                            <div class="col-md-10">
                                                                <input type="number" class="form-control"
                                                                       name="sdt"
                                                                       id="sdt"
                                                                       placeholder="Số điện thoại đặt hàng"
                                                                       th:value="${taikhoan.phonenumber}">
                                                            </div>
                                                        </div>
                                                        <div class="form-group row mb-4">
                                                            <label for="billing-address"
                                                                   class="col-md-2 col-form-label">Địa
                                                                chỉ</label>
                                                            <div class="col-md-10">
                                                                <input class="form-control" id="billing-address"
                                                                       rows="3"
                                                                       th:field="*{diachinhan}"
                                                                       placeholder="Địa chỉ nhận hàng">
                                                            </div>
                                                        </div>


                                                        <div class="form-group row mb-0">
                                                            <label for="example-textarea"
                                                                   class="col-md-2 col-form-label">Lời nhắn:</label>
                                                            <div class="col-md-10">
                                                            <textarea class="form-control" id="example-textarea"
                                                                      rows="3"
                                                                      placeholder="Lời nhắn cho quản lý"></textarea>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="v-pills-payment" role="tabpanel"
                                                 aria-labelledby="v-pills-payment-tab">
                                                <div>
                                                    <div>
                                                        <h5 class="mt-3 mb-2 font-size-15">Hình thức vận chuyển</h5>
                                                        <div>
                                                            <div class="form-check form-check-inline font-size-16"
                                                                 th:each="vanchuyen: ${vanchuyens}">
                                                                <input class="form-check-input" type="radio"
                                                                       th:value="${vanchuyen.MaVC}"
                                                                       name="vanchuyen" th:id="${vanchuyen.MaVC}"
                                                                       th:text="${vanchuyen.TenVC}">

                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <h5 class="mt-3 mb-2 font-size-15">Phương thức thanh toán</h5>
                                                        <div>
                                                            <div class="form-check form-check-inline font-size-16"
                                                                 th:each="thanhtoan: ${thanhtoans}">
                                                                <input class="form-check-input" type="radio"
                                                                       th:value="${thanhtoan.id}"
                                                                       name="thanhtoan" th:id="${thanhtoan.id}"
                                                                       th:text="${thanhtoan.hinhthuc}">

                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="tab-pane fade" id="v-pills-confir" role="tabpanel"
                                                 aria-labelledby="v-pills-confir-tab">
                                                <div class="card shadow-none border mb-0">
                                                    <div class="card-body">
                                                        <h4 class="card-title mb-4">Đơn hàng</h4>

                                                        <div class="table-responsive">
                                                            <table class="table align-middle mb-0 table-nowrap">
                                                                <thead class="table-light">
                                                                <tr>
                                                                    <th scope="col">Ảnh</th>
                                                                    <th scope="col">Tên sản phẩm</th>
                                                                    <th scope="col">Giá</th>
                                                                </tr>
                                                                </thead>
                                                                <tbody>
                                                                <tr th:each="ctGiohang: ${ctGiohangs}">
                                                                    <th scope="row"><img
                                                                            th:src="${ctGiohang.sanpham.anh}"
                                                                            alt="product-img"
                                                                            title="product-img"
                                                                            class="avatar-md"></th>
                                                                    <td>
                                                                        <h5 class="font-size-14 text-truncate"><a
                                                                                class="text-dark"
                                                                                th:text="${ctGiohang.sanpham.TenSP}"> </a>
                                                                        </h5>
                                                                        <p class="text-muted mb-0"
                                                                           th:text="${ctGiohang.sanpham.gia} +' x '+ ${ctGiohang.soluong}"></p>
                                                                    </td>
                                                                    <td th:text="${ctGiohang.sanpham.gia*ctGiohang.soluong}"></td>
                                                                </tr>
                                                                <tr>
                                                                    <td colspan="2">
                                                                        <h6 class="m-0 text-end">Tổng đơn giá:</h6>
                                                                    </td>
                                                                    <td>
                                                                        $ 675
                                                                    </td>
                                                                </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                        <div class="row mt-4">
                                                            <div class="col-sm-6">

                                                            </div> <!-- end col -->
                                                            <div class="col-sm-6">
                                                                <div class="text-end">
                                                                    <button type="submit" class="btn btn-success">
                                                                        <i class="mdi mdi-truck-fast me-1"></i> Mua ngay
                                                                    </button>
                                                                </div>
                                                            </div> <!-- end col -->
                                                        </div> <!-- end row -->
                                                    </div>
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </form>
                            <div class="row mt-4">
                                <div class="col-sm-6">
                                    <a href="/gio-hang" class="btn text-muted d-none d-sm-inline-block btn-link">
                                        <i class="mdi mdi-arrow-left me-1"></i> Quay về giỏ hàng </a>
                                </div> <!-- end col -->

                            </div> <!-- end row -->
                        </div>


                    </div>
                </div>

                <!-- end row -->
            </div> <!-- container-fluid -->
        </div>
    </div>
    <!--Hết nội dung-->
</div>
<footer th:replace="layout :: footer"></footer>
<!--
<script src="/js/pages/form-wizard.init.js" type="text/javascript"></script>
-->
<script src="https://cdn.jsdelivr.net/npm/jquery.steps@1.1.2/dist/jquery-steps.min.js"></script>

<div th:replace="layout :: link-js"></div>
<script>
  $("#basic-example").steps({
        headerTag: "h3",
        bodyTag: "section",
        transitionEffect: "slide"
    });
</script>
<script>
    function addToCart(element) {
	var productParent = $(element).closest('div.product-item');

	var price = $(productParent).find('.price span').text();
	var productName = $(productParent).find('.productname').text();
	var quantity = $(productParent).find('.product-quantity').val();

	var cartItem = {
		productName: productName,
		price: price,
		quantity: quantity
	};
	var cartItemJSON = JSON.stringify(cartItem);

	var cartArray = new Array();
	// If javascript shopping cart session is not empty
	if (sessionStorage.getItem('shopping-cart')) {
		cartArray = JSON.parse(sessionStorage.getItem('shopping-cart'));
	}
	cartArray.push(cartItemJSON);

	var cartJSON = JSON.stringify(cartArray);
	sessionStorage.setItem('shopping-cart', cartJSON);
	showCartTable();
}
</script>

</body>

</html>
